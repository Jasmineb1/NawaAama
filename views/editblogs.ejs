<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- Adding blog form -->
    <!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <link rel="stylesheet" href="/stylesheets/loginstyle.css">
  </head>
  <body>
   

    <!-- <ul class="nav justify-content-end py-3" >
    <li class="nav-item-logo">
        <a href="/"><img src="/images/navlogo.png" alt="logo" class="logo"></a>
    </li>

     NAVIGATION BAR 
      <li class="nav-item">
        <a class="nav-link active" href="/">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/aboutus">About us</a>
      </li>
      
      <li class="nav-item">
        <a class="nav-link" href="#">Community</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/calculator" tabindex="-1" aria-disabled="true">Tracker</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/login" tabindex="-1" aria-disabled="true">Login/Signup</a>
      </li>
    </ul> -->

<!-- Login page FrontEnd -->
<div class="row">
  <div class="col-sm-6 col-md-6 col-xs-12">
    <img src="/images/bloghome.png" alt="login image" class="login_img">
  </div>
    
    <div class="col-sm-6 col-md-6 col-xs-12">
      <div class="form-comtainer">
        <h2>Edit blog</h2>
        <form action="/edit/<%=blogs._id%>" method="post" onsubmit=submitForm(event,blog._id)  >
          <input id = "id" value="<%=blogs._id%> " hidden>
           
            <div class="form-group">
                <label for="title">Title</label>
                <input type="text" id="title" name="title" placeholder="Enter the title" required autocomplete="off" value="<%=blogs.title%>">
            </div>
            <div class="form-group" >
                <label for="content">Content</label>
                <textarea name="content" cols="40" rows="10"><%= blogs.content%></textarea>
            </div>
            <button type="submit" class="submit-btn" name="action">
                Submit Changes
            </button>
        </form>
      </div>
    </div>

</div>
  </body>

  <script>
    const formData = new FormData();

    function submitForm(e) {
      e.preventDefault();
      const title = document.getElementById("title");
      const files = document.getElementById("image");
      const content = document.getElementById("content");
      const id = document.getElementById('id')

      formData.append("title", title.value);
      formData.append("content", content.value);
      formData.append("files", files.files[0]);
      
      console.log("formData", formData,id,value);
      fetch(`/edit/${id.value}`, {
        method: 'POST',
        body: formData,
      })
        .then((res) => console.log(res))
        .catch((err) => console.error("Error occurred", err));
    }
  </script>

</html>